(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8216:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return t(2601)}])},2601:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return U}});var s=t(7568),n=t(1438),a=t(2951),l=t(8029),i=t(460),c=t(7582),o=t(5893),d=t(7294),u=t(3544),p=t(7462),h=t(3871),v=t(6010),f=t(8459),m=t(8935),Z=t(2519),g=t(2248);function b(e){var r=e.children,t=e.className,s=(0,v.Z)(t),n=(0,m.Z)(b,e),a=(0,Z.Z)(b,e);return d.createElement(a,(0,p.Z)({},n,{className:s}),r)}b.handledProps=["as","children","className"],b.defaultProps={as:"tbody"},b.propTypes={};var x=b,w=t(9591),G=t(5150);function j(e){var r=e.active,t=e.children,s=e.className,n=e.collapsing,a=e.content,l=e.disabled,i=e.error,c=e.icon,o=e.negative,u=e.positive,h=e.selectable,b=e.singleLine,x=e.textAlign,w=e.verticalAlign,k=e.warning,A=e.width,N=(0,v.Z)((0,f.lG)(r,"active"),(0,f.lG)(n,"collapsing"),(0,f.lG)(l,"disabled"),(0,f.lG)(i,"error"),(0,f.lG)(o,"negative"),(0,f.lG)(u,"positive"),(0,f.lG)(h,"selectable"),(0,f.lG)(b,"single line"),(0,f.lG)(k,"warning"),(0,f.X4)(x),(0,f.Ok)(w),(0,f.H0)(A,"wide"),s),y=(0,m.Z)(j,e),R=(0,Z.Z)(j,e);return g.kK(t)?d.createElement(R,(0,p.Z)({},y,{className:N}),G.Z.create(c),a):d.createElement(R,(0,p.Z)({},y,{className:N}),t)}j.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],j.defaultProps={as:"td"},j.propTypes={},j.create=(0,w.u5)(j,(function(e){return{content:e}}));var k=j;function A(e){var r=e.children,t=e.className,s=e.content,n=e.fullWidth,a=(0,v.Z)((0,f.lG)(n,"full-width"),t),l=(0,m.Z)(A,e),i=(0,Z.Z)(A,e);return d.createElement(i,(0,p.Z)({},l,{className:a}),g.kK(r)?s:r)}A.handledProps=["as","children","className","content","fullWidth"],A.defaultProps={as:"thead"},A.propTypes={};var N=A;function y(e){var r=e.as,t=(0,m.Z)(y,e);return d.createElement(N,(0,p.Z)({},t,{as:r}))}y.handledProps=["as"],y.propTypes={},y.defaultProps={as:"tfoot"};var R=y;function P(e){var r=e.as,t=e.className,s=e.sorted,n=(0,v.Z)((0,f.cD)(s,"sorted"),t),a=(0,m.Z)(P,e);return d.createElement(k,(0,p.Z)({},a,{as:r,className:n}))}P.handledProps=["as","className","sorted"],P.propTypes={},P.defaultProps={as:"th"};var q=P;function E(e){var r=e.active,t=e.cellAs,s=e.cells,n=e.children,a=e.className,l=e.disabled,i=e.error,c=e.negative,o=e.positive,u=e.textAlign,b=e.verticalAlign,x=e.warning,w=(0,v.Z)((0,f.lG)(r,"active"),(0,f.lG)(l,"disabled"),(0,f.lG)(i,"error"),(0,f.lG)(c,"negative"),(0,f.lG)(o,"positive"),(0,f.lG)(x,"warning"),(0,f.X4)(u),(0,f.Ok)(b),a),G=(0,m.Z)(E,e),j=(0,Z.Z)(E,e);return g.kK(n)?d.createElement(j,(0,p.Z)({},G,{className:w}),(0,h.Z)(s,(function(e){return k.create(e,{defaultProps:{as:t}})}))):d.createElement(j,(0,p.Z)({},G,{className:w}),n)}E.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],E.defaultProps={as:"tr",cellAs:"td"},E.propTypes={},E.create=(0,w.u5)(E,(function(e){return{cells:e}}));var _=E;function C(e){var r=e.attached,t=e.basic,s=e.celled,n=e.children,a=e.className,l=e.collapsing,i=e.color,c=e.columns,o=e.compact,u=e.definition,b=e.fixed,w=e.footerRow,G=e.headerRow,j=e.headerRows,k=e.inverted,A=e.padded,y=e.renderBodyRow,P=e.selectable,q=e.singleLine,E=e.size,T=e.sortable,B=e.stackable,z=e.striped,H=e.structured,L=e.tableData,D=e.textAlign,O=e.unstackable,X=e.verticalAlign,F=(0,v.Z)("ui",i,E,(0,f.lG)(s,"celled"),(0,f.lG)(l,"collapsing"),(0,f.lG)(u,"definition"),(0,f.lG)(b,"fixed"),(0,f.lG)(k,"inverted"),(0,f.lG)(P,"selectable"),(0,f.lG)(q,"single line"),(0,f.lG)(T,"sortable"),(0,f.lG)(B,"stackable"),(0,f.lG)(z,"striped"),(0,f.lG)(H,"structured"),(0,f.lG)(O,"unstackable"),(0,f.sU)(r,"attached"),(0,f.sU)(t,"basic"),(0,f.sU)(o,"compact"),(0,f.sU)(A,"padded"),(0,f.X4)(D),(0,f.Ok)(X),(0,f.H0)(c,"column"),"table",a),K=(0,m.Z)(C,e),U=(0,Z.Z)(C,e);if(!g.kK(n))return d.createElement(U,(0,p.Z)({},K,{className:F}),n);var I={defaultProps:{cellAs:"th"}},W=(G||j)&&d.createElement(N,null,_.create(G,I),(0,h.Z)(j,(function(e){return _.create(e,I)})));return d.createElement(U,(0,p.Z)({},K,{className:F}),W,d.createElement(x,null,y&&(0,h.Z)(L,(function(e,r){return _.create(y(e,r))}))),w&&d.createElement(R,null,_.create(w)))}C.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],C.defaultProps={as:"table"},C.propTypes={},C.Body=x,C.Cell=k,C.Footer=R,C.Header=N,C.HeaderCell=q,C.Row=_;var T=C,B=t(967),z=t(6215),H=t(4148),L=t(4111),D=t(4924),O=t(1508),X=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){var e;(0,n.Z)(this,t),e=r.apply(this,arguments);var a=(0,L.Z)(e);(0,D.Z)((0,L.Z)(e),"onApprove",(0,s.Z)((function(){var e,r;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return e=(0,H.Z)(a.props.address),[4,O.Z.eth.getAccounts()];case 1:return r=t.sent(),[4,e.methods.approveRequest(a.props.id).send({from:r[0]})];case 2:return t.sent(),z.Router.replaceRoute("/campaigns/".concat(a.props.address,"/requests")),[2]}}))})));var l=(0,L.Z)(e);return(0,D.Z)((0,L.Z)(e),"onFinalize",(0,s.Z)((function(){var e,r;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return e=(0,H.Z)(l.props.address),[4,O.Z.eth.getAccounts()];case 1:return r=t.sent(),[4,e.methods.finalizeRequest(l.props.id).send({from:r[0]})];case 2:return t.sent(),[2]}}))}))),e}return(0,a.Z)(t,[{key:"render",value:function(){var e=T.Row,r=T.Cell,t=this.props,s=t.id,n=t.contributors,a=t.request,l=a.approvalCount>n/2;return(0,o.jsxs)(e,{disabled:a.complete,children:[(0,o.jsx)(r,{children:s}),(0,o.jsx)(r,{children:a.description}),(0,o.jsx)(r,{children:O.Z.utils.fromWei(a.value,"ether")}),(0,o.jsx)(r,{children:a.recipient}),(0,o.jsxs)(r,{children:[a.approvalCount,"/",n]}),(0,o.jsxs)(r,{children:[a.complete?null:(0,o.jsx)(B.Z,{color:"green",inverted:!0,onClick:this.onApprove,children:"Approve"}),a.complete?null:(0,o.jsx)(B.Z,{primary:!0,onClick:this.onFinalize,disabled:!l,children:"Finalize"})]})]})}}]),t}(d.Component),F=X,K=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"renderRequestRows",value:function(){var e=this;return this.props.requests.map((function(r,t){return(0,o.jsx)(F,{id:t,request:r,address:e.props.address,contributors:e.props.contributors},t)}))}},{key:"render",value:function(){var e=T.Header,r=T.Row,t=T.HeaderCell,s=T.Body;return(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(z.Link,{legacyBehavior:!0,route:"/campaigns/".concat(this.props.address),children:(0,o.jsx)("a",{children:"< Go Back"})}),(0,o.jsx)("h3",{children:"Requests of Campaign"}),(0,o.jsx)(z.Link,{legacyBehavior:!0,route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,o.jsx)("a",{children:(0,o.jsx)(B.Z,{primary:!0,children:"Add Requets"})})}),(0,o.jsxs)(T,{children:[(0,o.jsx)(e,{children:(0,o.jsxs)(r,{children:[(0,o.jsx)(t,{children:"ID"}),(0,o.jsx)(t,{children:"Description"}),(0,o.jsx)(t,{children:"Amount"}),(0,o.jsx)(t,{children:"Recipient"}),(0,o.jsx)(t,{children:"Approvals"}),(0,o.jsx)(t,{children:"Actions"})]})}),(0,o.jsx)(s,{children:this.renderRequestRows()})]}),(0,o.jsxs)("div",{children:[" Total: ",this.props.requestsCount," requests"]})]})}}],[{key:"getInitialProps",value:function(e){return(0,s.Z)((function(){var r,t,s,n,a;return(0,c.__generator)(this,(function(l){switch(l.label){case 0:return r=e.query.address,[4,(t=(0,H.Z)(r)).methods.getRequestsCount().call()];case 1:return s=l.sent(),[4,t.methods.approversCount().call()];case 2:return n=l.sent(),[4,Promise.all(Array(parseInt(s)).fill().map((function(e,r){return t.methods.requests(r).call()})))];case 3:return a=l.sent(),[2,{address:r,requests:a,requestsCount:s,contributors:n}]}}))}))()}}]),t}(d.Component),U=K}},function(e){e.O(0,[774,714,676,991,888,179],(function(){return r=8216,e(e.s=r);var r}));var r=e.O();_N_E=r}]);